!function(t,e,n,i){"use strict";function d(){function e(e,i){var d=i.ncAutoHeight?i.ncAutoHeight:150,s=n(t).height();d=Math.ceil(s-d),e.height(d)}var i={compile:e,restrict:"A"};return i}i.module("nc.auto-height",[]).directive("ncAutoHeight",d),d.$inject=[]}(window,document,jQuery,angular),function(t,e){"use strict";function n(t){function n(t,n,i){this.id=t.attr(i.nodeIdAttr),this.row=t,this.tree=n,this.children=[],this.initialized=!1,this.settings=i,this.parentId=this._getParentId(t,i.parentIdAttr),this.childrenCount=this._getChildrenCount(t,i.childrenCountAttr),this.bgColor=null,this.treeCell=e(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=e(this.settings.expanderTemplate),this.reducer=e(this.settings.reducerTemplate),this.toggleBtn=e('<span style="float:right"></span>'),this.indenter=e(this.settings.indenterTemplate),this.treeCell.prepend(this.indenter),this.treeCell.append(this.toggleBtn)}function i(t){this.tree={},this.settings=t,this.dynamicNodesCache=[],this.isDynamicData=!1,this.selected={},this.nodes=[],this.roots=[]}function d(t,e){var n;for(n in e)t.append(e[n].row),e[n].children.length>0&&d(t,e[n].children)}function s(t,e){if(void 0!==e.parentId){var n=e.tree[e.parentId];n.row.after(e.row),(n.collapsed()||n.isBranchNode())&&e.hide(),n.expanded()&&e.show()}else t.prepend(e.row)}function a(t,e){var n,i,d,s,a=t.tree,o=e.checked,r=[];if(void 0!==t.cacheChecked)for(n=t.cacheChecked.length,i=0;n>i;i++)void 0!==a[t.cacheChecked[i]]&&a[t.cacheChecked[i]].setUnChecke();for(n=e.checked.length,i=0;n>i;i++)if(s=a[o[i]],void 0!==s){for(s.setChecked().setBgColorAndSelect(),d=s;d;)r.unshift(d),d=d.parentNode();r.forEach(function(t,e,n){t.expand()})}t.cacheChecked=o}function o(t,n){t.ncOptions=e.extend({branchAttr:"ttBranch",clickableNodeNames:!0,column:1,columNames:["name"],withInput:{type:"radio",width:"1em",name:"radio"},selectedColor:"#2f75b2",columnElType:"td",expandable:!0,expanderTemplate:'<i class="fa fa-chevron-down fa-fw"></i>',reducerTemplate:'<i class="fa fa-chevron-up fa-fw"></i>',indent:2.4,unit:"em",indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"nc-treetable-id",childrenCountAttr:"nc-treetable-children-count",parentIdAttr:"nc-treetable-parent-id",stringExpand:"Expand",stringCollapse:"Collapse",selected:[],checked:[]},t.ncOptions),t.rendering=!1;var o,r=n;r.addClass("nc-treetable"),t.$watch("ncData",function(e,n){void 0!=e&&null!=e&&e.length&&!t.rendering&&(t.rendering=!0,o=new i(t.ncOptions),o.loadRows(t.ncData).render(),r.children().remove(),d(r,o.roots),t.rendering=!1,a(o,t.ncOptions))}),t.$watch("ncDynamicData",function(e,n){void 0!=e&&null!=e&&e.length&&!t.rendering&&(t.rendering=!0,o.isDynamicData=!0,o.loadRows(t.ncDynamicData).render(),o.isDynamicData=!1,o.dynamicNodesCache.forEach(function(t){s(r,t)}),t.rendering=!1)}),t.ncOptions.checked&&(t.ncOptions.selected=t.ncOptions.checked),t.$watch("ncOptions.checked",function(e,n){e!=n&&(t.ncOptions.selected=e,a(o,t.ncOptions))}),r.on("click",function(e){t.$apply(),e.stopPropagation()})}function r(t){function e(e){var n=t.ncOptions.withInput.type,i=t.ncOptions.selected.indexOf(e);"radio"==n&&(t.ncOptions.selected=[]),-1!=i&&"radio"!=n?t.ncOptions.selected.splice(i,1):t.ncOptions.selected.push(e)}t.setSelect=e}return r.$inject=["$scope"],n.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},n.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},n.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},n.prototype._hideChildren=function(){var t,e,n,i,d;for(i=this.children,d=[],e=0,n=i.length;n>e;e++)t=i[e],d.push(t.hide());return d},n.prototype._showChildren=function(){var t,e,n,i,d;for(i=this.children,d=[],e=0,n=i.length;n>e;e++)t=i[e],d.push(t.show());return d},n.prototype.collapsed=function(){return this.row.hasClass("collapsed")},n.prototype.parentNode=function(){return null!==this.parentId?this.tree[this.parentId]:null},n.prototype._initialize=function(){var t=this.settings;return this.render(),t.expandable===!0&&"collapsed"===t.initialState?this.collapse():(console.info("expand"),this.expand()),this.initialized=!0},n.prototype._getParentId=function(t,e){var n=t.attr(e);return null!==n&&""!==n?n:void 0},n.prototype._getChildrenCount=function(t,e){var e=t.attr(e);return null!==e&&""!==e?e:void 0},n.prototype.setBgColorAndSelect=function(t){var n=e.isEmptyObject(this.settings.withInput);!this.bgColor&&n&&(this.bgColor=this.row.css("background-color")),n&&(void 0!=this.tree.selected&&(this.tree.selected.css("background",this.bgColor),this.tree.selected.removeClass("nc-treetable-selected")),this.tree.selected=this.row,this.row.css("background",this.settings.selectedColor),this.tree.selected.addClass("nc-treetable-selected"),this.settings.selected=[],this.settings.selected.push(this.id))},n.prototype.render=function(){var t,n,i=this.settings;return n=i.clickableNodeNames===!0?this.treeCell:this.toggleBtn,i.expandable===!0&&this.isBranchNode()?(t=function(t){return t.data.node.setBgColorAndSelect(),t.data.node.tree[e(this).parents("tr").attr(i.nodeIdAttr)].toggle(),t.preventDefault()},this.toggleBtn.html(this.expander),function(e){n.off("click").on("click",{node:e},t)}(this)):(this.childrenCount>0&&this.toggleBtn.html(this.expander),function(t){n.off("click").on("click",{node:t},function(n){n.data.node.setBgColorAndSelect(),t.childrenCount>0&&n.data.node.tree[e(this).parents("tr").attr(i.nodeIdAttr)].toggle()})}(this)),this.indenter[0].style.paddingLeft=""+this.level()*i.indent+i.unit,this},n.prototype.isBranchNode=function(){return this.childrenCount>0||this.children.length>0||this.row.data(this.settings.branchAttr)===!0},n.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},n.prototype.ancestors=function(){var t,e;for(e=this,t=[];e=e.parentNode();)t.push(e);return t},n.prototype.level=function(){return this.ancestors().length},n.prototype.addChild=function(t){return this.children.push(t)},n.prototype.expanded=function(){return this.row.hasClass("expanded")},n.prototype.collapse=function(){return this.collapsed()?this:(this.toggleBtn.html(this.expander),this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this)},n.prototype.expand=function(){return this.expanded()?this:(this.toggleBtn.html(this.reducer),this.row.removeClass("collapsed").addClass("expanded"),this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},n.prototype.setChecked=function(){return this.row.find("input:first").prop("checked",!0),this},n.prototype.setUnChecke=function(){return this.row.find("input:first").prop("checked",!1),this},i.prototype.loadRows=function(t){var e,i,d;if(null!==t)for(d=0;d<t.length;d++)i=this._toJQueryDOM(t[d]),e=new n(i,this.tree,this.settings),this.nodes.push(e),this.isDynamicData&&this.dynamicNodesCache.push(e),this.tree[e.id]=e,null!==e.parentId&&this.tree[e.parentId]?this.tree[e.parentId].addChild(e):this.roots.push(e);for(d=0;d<this.nodes.length;d++)e=this.nodes[d].updateBranchLeafClass();return this},i.prototype._toJQueryDOM=function(t){var n,i,d,s=e("<tr></tr>"),a=this.settings.columNames.length,o=this.settings,r=this.settings.withInput;if(s.attr(o.nodeIdAttr,t.id),s.attr(o.parentIdAttr,t.parentId),s.attr(o.childrenCountAttr,t.hasChildren),r&&!e.isEmptyObject(r)){var l=e('<input type="'+r.type+'"/>');"radio"==r.type&&l.attr("name",r.name),function(t,e){l.on("click",{id:t.id,settings:e},function(t){var e=r.type,n=t.data.id,i=t.data.settings.selected.indexOf(n);"radio"==e&&(t.data.settings.selected=[]),-1!=i&&"radio"!=e?t.data.settings.selected.splice(i,1):t.data.settings.selected.push(n)})}(t,o),i=e("<td></td>"),i.append(l),i.width(r.width),s.append(i)}for(n=0;a>n;n++)d=o.columNames[n],t[d]&&(i=e("<td></td>"),i.html(t[d]),s.append(i));return s},i.prototype._toAngularDOM=function(t){var n,i,d=e("<tr></tr>"),s=e("<td></td>"),a=t.columNames.length;if(t.withInput&&!e.isEmptyObject(t.withInput)){var o=e("<input>"),r=t.withInput.type;o.attr("type",r),s.width(t.withInput.width),"radio"==r&&o.attr("name","radio"),o.attr("ng-click","setSelect(item.id)"),s.append(o),d.append(s)}for(d.attr("ng-repeat","item in ncData"),d.attr(t.nodeIdAttr,"{{item.id}}"),d.attr(t.childrenCount,"{{item.parentId}}"),i=0;a>i;i++)n=t.columNames[i],s=e("<td></td>"),s.attr("ng-bind","item."+n),d.append(s);return d},i.prototype.render=function(){var t,e,n,i;for(i=this.roots,e=0,n=i.length;n>e;e++)t=i[e],t.show();return this},{restrict:"EA",controller:r,scope:{ncOptions:"=",ncData:"=",ncDynamicData:"="},link:o}}t.module("nc.treetable",[]).directive("ncTreetable",n),n.$inject=["$compile"]}(window.angular,window.jQuery),function(t){"use strict";function e(e){function i(i,d,s){var a=t.extend({template:9},i.ncLoadingOptions),o=$("<div></div>");a.templateUrl?e(a.templateUrl).then(function(t){o.append(t)}):o.append(n[a.template]),o.addClass("nc-loading"),d.css("position","relative"),d.append(o),i.$watch("ncLoading",function(t,e){void 0!=t&&(t?o.show():o.hide())})}var d={link:i,restrict:"A",scope:{ncLoading:"=",ncLoadingOptions:"=?"}};return d}t.module("nc.loading",[]).directive("ncLoading",e),e.$inject=["$templateRequest"];var n={1:'<div class="nc-loading-type nc-loading-type-1 "> <div class="nc-loading-line"></div> <div class="nc-loading-line"></div> <div class="nc-loading-line"></div></div>',2:'<div class="nc-loading-type nc-loading-type-2 "> <div class="nc-loading-line"></div> <div class="nc-loading-line"></div> <div class="nc-loading-line"></div></div>',3:'<div class="nc-loading-type nc-loading-type-3 "> <div class="nc-loading-line"></div> <div class="nc-loading-line"></div>  <div class="nc-loading-line"></div></div>',4:'<div class="nc-loading-type nc-loading-type-4 "> <div class="nc-loading-ring-1"></div></div>',5:'<div class="nc-loading-type nc-loading-type-5 "> <div class="nc-loading-ring-2"><div class="nc-loading-ball-holder"><div class="nc-loading-ball"></div></div></div>',6:'<div class="nc-loading-type nc-loading-type-6 "><div class="nc-loading-letter-holder"><div class="nc-loading-delay-1 nc-loading-letter">L</div><div class="nc-loading-delay-2 nc-loading-letter">o</div><div class="nc-loading-delay-3 nc-loading-letter">a</div><div class="nc-loading-delay-4 nc-loading-letter">d</div><div class="nc-loading-delay-5 nc-loading-letter">i</div><div class="nc-loading-delay-6 nc-loading-letter">n</div><div class="nc-loading-delay-7 nc-loading-letter">g</div><div class="nc-loading-delay-8 nc-loading-letter">.</div><div class="nc-loading-delay-9 nc-loading-letter">.</div><div class="nc-loading-delay-10 nc-loading-letter">.</div></div>',7:'<div class="nc-loading-type nc-loading-type-7"><div class="nc-loading-square-holder"><div class="nc-loading-square"></div></div></div>',8:'<div class="nc-loading-type nc-loading-type-8"><div class="nc-loading-line"></div></div>',9:'<div class="nc-loading-type nc-loading-type-9"> <div class="nc-loading-spinner"><div class="nc-loading-bubble-1"></div><div class="nc-loading-bubble-2"></div></div></div>',10:'<div class="nc-loading-type nc-loading-type-10"><div class="nc-loading-bar"></div></div>'}}(window.angular);